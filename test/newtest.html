<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <META HTTP-EQUIV="Cache-Control" CONTENT="cache">
        <title>Document</title>
        <script>

            document.write(process.versions.node);
            document.write("ELECTRON:" + process.versions.electron)
            // document.getElementById('dddd').innerHTML = 'module'
        </script>
        <script src="./test1.js" type="module"></script>
        <style>
            .text {

                position: absolute;

                left: 35vw;

                transform: translateX(-50%);

                font-size: 25px;

            }



            .bg {

                background: #fff;

                border-radius: 5px;

                border: 1px solid #9f81f1;

                width: 70vw;

                height: 50px;

                line-height: 50px;

                position: relative;

            }



            .bg>.text {

                color: #9f81f1;

            }



            .progress {

                position: absolute;

                height: 100%;

                background: #9f81f1;

                overflow: hidden;
                transition: all 5s ease;
            }

            .progress>.text {

                color: #fff;

            }
        </style>
        <div class="bg">

            <span class="text">0%</span>

            <div class="progress" style="width: 0%;">

                <span class="text">0%</span>

            </div>

        </div>
    </head>

    <body>

        <button id="quit" class="aaa">退出</button>
        <script>
            // 实例化不会进行通知
            let notification = new Notification('titleName', {
                // 通知的标题, 将在通知窗口的顶部显示
                title: 'Boss',
                // 通知的副标题, 显示在标题下面 macOS
                subtitle: '重要消息',
                // 通知的正文文本, 将显示在标题或副标题下面
                body: '@所有人 放假！！！',
                // false有声音，true没声音
                silent: false,
                // 通知的超时持续时间 'default' or 'never'
                timeoutType: 'default',
                hasReply:true,
                replyPlaceholder:'???'
            })
            console.log('notice')
        </script>

        <p id="ajax">initialed</p>
        <!DOCTYPE html>
        <html>
            <img src="./pp.gif" alt="">
            <img src="~/peerpic.jpg" alt="">
            <head>
                <meta charset="utf-8">
                <title>菜鸟教程(runoob.com)</title>
                <style>
                    #myDIV {
                        background-color: coral;
                        border: 1px solid;
                        padding: 50px;
                        color: white;
                    }

                    .pp {
                        height: 80vh;
                        width: 100vw;
                        background-color: antiquewhite;
                    }
                </style>
            </head>

            <body>
                <div class="p">
                    <div class="pp ppp">
                        ppppp
                    </div>
                    <div class="pp ppp">
                        ppppp
                    </div>
                </div>
                <script>document.querySelector('.p').onclick = e =>
                        document.querySelectorAll('.p .pp')[0].innerHTML = 'wwww'
                </script>
                <div class="">
                    <div id="myDIV"> div 元素添加了 onmousemove 事件句柄，在你移动鼠标时会显示随机数。
                        <p>点击按钮移除 DIV 的事件句柄。</p>
                        <button onclick=" debugger;this.innerHTML='dddddd'" id="myBtn">点我</button>
                    </div>
                    <p id="demo"></p>
                </div>
                <script>
                    document.getElementById('myDIV').addEventListener("click", myFunction, true);
                    function myFunction() {
                        debugger
                        document.getElementById("demo").innerHTML = Math.random();

                    }
                    function removeHandler() {
                        document.getElementById('myDIV').removeEventListener("click", myFunction);
                    }
                </script>

            </body>

        </html>
        <form action="#2">
            <input type="text">
            <input type="text">
            <input type="submit">
        </form>
        <button onclick="messagebox('this is test which is messagebox via javascript language,encapsulation. the long test messages in line will be tested by the function.',
    'error','YesNoCancel',{},50)">TEST</button>
        <input type="text" name="" id="inp" value="">
        <div id="dddd"></div>
        <script>

            // document.write("node: " + process.versions.node);
            // document.write("chrome: " + process.versions.chrome)
            function debounce(fn) {
                let timeout = null; // 创建一个标记用来存放定时器的返回值
                return function () {
                    clearTimeout(timeout); // 每当用户输入的时候把前一个 setTimeout clear 掉
                    timeout = setTimeout(() => { // 然后又创建一个新的 setTimeout, 这样就能保证输入字符后的 interval 间隔内如果还有字符输入的话，就不会执行 fn 函数
                        fn.apply(this, arguments);
                    }, 500);
                };
            }
            function sayHi() {

                let a = 'name.test';
                console.log(a.substr(0, a.lastIndexOf('.')))
                console.log('防抖成功');
            }

            var inp = document.getElementById('inp');
            inp.addEventListener('input', debounce(sayHi), false); // 防抖
            /**
             *
             * @param {string} text
             * @param {'infomation'|'warning'|'error'} warningtype
             * @param {'YesNoCancel'|'YesNo'|'Yes'} messageButton
             * @param {{yes:(args:any)=>void,no:(args:any)=>void,cancel:()=>void,args:string|number|{}|[]}} buttonsCallback
             * @param {number} timeout unit: ms
             */
            function messagebox(text, warningtype, messageButton, { yes = d => { }, no = d => { }, cancel = d => { }, args = undefined } = {}, timeout = undefined) {
                if (!document.getElementById('tipBackground_of_messagebox')) {
                    let tipBackground = document.createElement('div');
                    tipBackground.id = 'tipBackground_of_messagebox';
                    let tip = document.createElement('div');
                    let contentWindow = document.createElement('article')
                    let tittle = document.createElement('h3');
                    let warningicon = document.createElement('b');
                    let warningtip = document.createElement('span');
                    let content = document.createElement('p');
                    let buttons = document.createElement('div');
                    let btnyes = document.createElement('button');
                    let btnno, btncancel;
                    tipBackground.appendChild(tip);
                    tip.appendChild(contentWindow);
                    contentWindow.append(tittle, content, buttons);
                    tittle.append(warningicon, warningtip);
                    warningicon.innerText = '!';
                    btnyes.innerText = 'Yes';
                    switch (messageButton) {
                        case 'YesNoCancel':
                            btnno = document.createElement('button');
                            btncancel = document.createElement('button');
                            btnno.innerText = 'No'
                            btncancel.innerText = 'Cancel'
                            buttons.append(btnyes, btnno, btncancel);

                            break;
                        case 'YesNo':
                            btnno = document.createElement('button');
                            btnno.innerText = 'No'
                            buttons.append(btnyes, btnno);
                            break;
                        case 'Yes':
                        default:
                            buttons.appendChild(btnyes);
                            break;
                    }
                    //#endregion

                    //#region  style
                    tipBackground.style = `
        position: fixed;
        z-index: 0;
        height: 100vh;
        display: flex;
        width: 0;
        justify-content: center;
        align-items: center;`;
                    tipBackground.onclick = tipBackgroundFlash;
                    tip.style = `
                bottom:15%;
        box-shadow: 1px 2px 7px 0px gainsboro;
        position:relative;
        z-index: 999;
        max-width: 70%;
        overflow: hidden;
        width: auto;
        min-width:200px;
        border-radius: 5px;
        transition: all linear 100ms;
        -webkit-transition: all linear 100ms;
        -moz-transition: all linear 100ms;
        -ms-transition: all linear 100ms;
        -o-transition: all linear 100ms;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        -ms-border-radius: 5px;
        -o-border-radius: 5px;
        background-color:#ffffffbb`;
                    contentWindow.style = ` 
       position: relative;
        left:0;
        opacity:0;
        margin: 10px;
        margin-top: 0;
        max-width: 100%;
        min-width: 200px;
        word-wrap: break-word;
        padding: 0;
        margin:0;
        transition: all linear 100ms;
        -webkit-transition: all linear 100ms;
        -moz-transition: all linear 100ms;
        -ms-transition: all linear 100ms;
        -o-transition: all linear 100ms;`;
                    tittle.style = `
        background-color: rgb(248, 211, 211);
        padding: 5px 20px;
        margin-block-start: 0;`;
                    warningicon.style = `
        display: inline-block;
        text-align: center;
        color: white;
        width:25px;
        border-radius: 50%;
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        -ms-border-radius: 50%;
        -o-border-radius: 50%;`;
                    warningtip.style = `margin-left: 10px`;
                    content.style = `
        text-align: center;
        width: 80%;
        margin: 2% auto;`;
                    buttons.style = `
        text-align: right;
        display: flex;
        padding-bottom: 20px;
        justify-content: space-around;`;
                    btnyes.style = `
        outline: none;
        min-width: 50px;
        color: white;
        border: none;
        /* box-shadow: 1px 2px 4px 0px hsl(0, 0%, 86%); */
        background: #26bd76;
        padding:5px 10px;`;
                    btnyes.onmouseenter = e => btnyes.style.boxShadow = '1px 2px 4px 2px hsl(0, 0 %, 86 %)';
                    btnyes.onmouseleave = e => btnyes.style.boxShadow = 'none';
                    btnyes.onclick = yesClick;
                    if (btnno) {
                        btnno.style = `
            outline: none;
            min-width: 50px;
            border: none;
            color: white;
            /* box-shadow: 1px 2px 4px 0px #f8f8f8; */
            background: #e65936;
            padding:5px 10px;`;
                        btnno.onmouseenter = e => btnno.style.boxShadow = '1px 2px 4px 2px hsl(0, 0 %, 86 %)';
                        btnno.onmouseleave = e => btnno.style.boxShadow = 'none';
                        btnno.onclick = noClick;
                    }
                    if (btncancel) {
                        btncancel.style = `
            outline: none;
            min-width: 50px;
            border: none;
            color: gary;
            /* box-shadow: 1px 2px 4px 0px #f8f8f8; */
            background: #efefef;
            padding:5px 10px;`;
                        btncancel.onmouseenter = e => btncancel.style.boxShadow = '1px 2px 4px 2px hsl(0, 0 %, 86 %)';
                        btncancel.onmouseleave = e => btncancel.style.boxShadow = 'none';
                        btncancel.onclick = cancelClick;
                    }
                    //#endregion

                    //#region warning style
                    switch (warningtype) {
                        case 'warning':
                            warningicon.style.backgroundColor = 'yellow';
                            warningtip.innerText = '警 告';
                            break;
                        case 'error':
                            warningicon.style.backgroundColor = 'red';
                            warningtip.innerText = '错 误';
                            break;
                        case 'infomation':
                        default:
                            warningicon.style.backgroundColor = 'green';
                            warningtip.innerText = '提 示';
                            break;
                    }
                    //#endregion
                    content.innerText = text;

                    if (parseInt(timeout)) {

                        let warningtimeout = document.createElement('span');
                        tittle.append(warningtimeout);
                        warningtimeout.style = `
                        position: absolute;
                        right: 10px;
                        display:inline-block;`;
                        let count = timeout;
                        warningtimeout.innerText = count;
                        let timeInteral = setInterval(() => {
                            warningtimeout.innerText = --count;
                            if (count <= 0) {
                                clearInterval(timeInteral);
                                close();
                            }
                        }, 1000);

                    }
                    //#region onclick 事件
                    function yesClick() {
                        yes(args);
                        close();
                    }
                    function noClick() {
                        no(args);
                        close();
                    }
                    function cancelClick() {
                        cancel();
                        close();
                    }

                    //#endregion

                    //#region show and close

                    function show() {
                        document.body.prepend(tipBackground);
                        tipBackground.style.width = '100%';
                        tip.style.width = 'auto';
                        tip.style.height = 'auto';
                        let width = getComputedStyle(tip).width
                        let height = getComputedStyle(tip).height
                        tip.style.width = '0'
                        tip.style.height = '0'
                        setTimeout(() => {
                            tip.style.width = width;
                            tip.style.height = height;
                            contentWindow.style.opacity = '1'
                            setTimeout(() => {
                                tip.style.height = 'auto';
                                tip.style.width = 'auto';
                            }, 100);
                        }, 100);
                    }
                    function close() {
                        let width = tip.style.width = getComputedStyle(tip).width;
                        tip.style.height = getComputedStyle(tip).height;
                        setTimeout(() => {
                            tip.style.width = '0';
                            tip.style.height = '0';
                            contentWindow.style.opacity = '0'
                            setTimeout(() => {
                                tip.style.minWidth = '0';
                                if (tipBackground.parentElement) {
                                    document.body.removeChild(tipBackground);
                                }
                            }, 100);
                        }, 100);
                    }
                    //#endregion
                    //阻止冒泡
                    tip.onclick = function (e) {
                        e.stopPropagation()
                    }
                    function tipBackgroundFlash(e) {
                        flash(2);
                    }
                    function flash(times) {
                        tip.style.boxShadow = '1px 2px 7px 7px gainsboro';

                        setTimeout(() => {
                            tip.style.boxShadow = '1px 2px 7px 0px gainsboro';
                            if (times > 1)
                                setTimeout(() => {
                                    flash(--times);
                                }, 200);
                        }, 200);
                    }
                    show();
                }
            }
            function a() {
                console.log('a')
            }
            a('undefined')


        </script>

        <script>
            console.log(convertCurrency('2019999999999999990.21'))
            function convertCurrency(convertString) {
                // Constants: 
                // var MAXIMUM_NUMBER = 99999999999.99;
                // Predefine the radix characters and currency symbols for output: 
                var CN_ZERO = "零";
                var CN_ONE = "壹";
                var CN_TWO = "贰";
                var CN_THREE = "叁";
                var CN_FOUR = "肆";
                var CN_FIVE = "伍";
                var CN_SIX = "陆";
                var CN_SEVEN = "柒";
                var CN_EIGHT = "捌";
                var CN_NINE = "玖";
                var CN_TEN = "拾";
                var CN_HUNDRED = "佰";
                var CN_THOUSAND = "仟";
                var CN_TEN_THOUSAND = "万"; //with thousand and huandred  
                var CN_HUNDRED_MILLION = "亿"; //with thousand and huandred  
                var CN_SYMBOL = "";
                var CN_DOLLAR = "元";
                var CN_TEN_CENT = "角";
                var CN_CENT = "分";
                var CN_INTEGER = "整";
                // if (!(currencyDigits).match(/^[1-9]\d+(?:\d+|\.\d{1,2})|^0\.\d{1,2}$/)) {
                //     console.error("请输入正确的数字金额!");
                //     return "";
                // }
                let a = ['0012'];
                if (a[0][0] == 0) {
                    a[0][0] = a[0][0] += 'ee'
                    console.log(a[0][0])
                }

                console.log(convertString.match(/^[1-9]\d+(?:\d+|\.\d{1,2})|^0\.\d{1,2}$/))
                let inputNumberArray = convertString.split('.');
                let resultInt = '', resultFloat = '';
                //deal with part of float
                console.log(inputNumberArray[1])
                if (inputNumberArray.length > 1) {
                    if (inputNumberArray[1][0] !== '0') {
                        resultFloat = inputNumberArray[1][0] + CN_TEN_CENT;
                    }
                    else if (inputNumberArray[0] !== '0') { // part of int is not zero
                        resultFloat = inputNumberArray[1][0].replace(/0/, CN_ZERO) + CN_TEN_CENT;
                    }
                    if (inputNumberArray[1][1] !== '0') {
                        resultFloat = inputNumberArray[1][1] + CN_CENT;
                    }
                    resultFloat = resultFloat
                        .replace(/1/g, CN_ONE)
                        .replace(/2/g, CN_TWO)
                        .replace(/3/g, CN_THREE)
                        .replace(/4/g, CN_FOUR)
                        .replace(/5/g, CN_FIVE)
                        .replace(/6/g, CN_SIX)
                        .replace(/7/g, CN_SEVEN)
                        .replace(/8/g, CN_EIGHT)
                        .replace(/9/g, CN_NINE);
                }
                console.log(resultFloat);
                //deal with part of int
                if (inputNumberArray[0] !== '0') {
                    let tempIntSort = inputNumberArray[0].match(/\d/g).reverse();
                    console.log(tempIntSort)
                    let loopCount = 0;
                    for (let i = 0; i < tempIntSort.length; i++) {
                        if (i % 4 == 0 && i != 0) {
                            loopCount++;
                            switch (loopCount % 2) {
                                case 0:
                                    if (tempIntSort[i] == 0)
                                        tempIntSort[i] = CN_HUNDRED_MILLION;
                                    else
                                        tempIntSort[i] += CN_HUNDRED_MILLION;
                                    break;
                                case 1:
                                    if (tempIntSort[i] == 0)
                                        tempIntSort[i] = CN_TEN_THOUSAND;
                                    else
                                        tempIntSort[i] += CN_TEN_THOUSAND;
                                    break;
                            }
                        } else {
                            if (tempIntSort[i] == '0') {

                                continue;
                            }
                            switch (i % 4) {
                                case 1:
                                    tempIntSort[i] += CN_TEN;
                                    break;
                                case 2:
                                    tempIntSort[i] += CN_HUNDRED;
                                    break;
                                case 3:
                                    tempIntSort[i] += CN_THOUSAND;
                                    break;
                            }
                        }
                    }
                    tempResult = '';
                    for (let i = tempIntSort.length - 1; i >= 0; i--) {
                        tempResult += tempIntSort[i];
                    }
                    resultInt = tempResult.replace(/1/g, CN_ONE)
                        .replace(/2/g, CN_TWO)
                        .replace(/3/g, CN_THREE)
                        .replace(/4/g, CN_FOUR)
                        .replace(/5/g, CN_FIVE)
                        .replace(/6/g, CN_SIX)
                        .replace(/7/g, CN_SEVEN)
                        .replace(/8/g, CN_EIGHT)
                        .replace(/9/g, CN_NINE)
                        .replace(/000万000/g, CN_SYMBOL)
                        .replace(/000万/g, CN_SYMBOL)
                        .replace(/0{0,2}(?:万)/g, CN_TEN_THOUSAND)
                        .replace(/0{0,3}(?:亿)/g, CN_HUNDRED_MILLION)
                        .replace(/0+/g, CN_ZERO);
                } else
                    resultInt = '';
                console.log(resultInt);
                return resultInt == ''
                    ? resultFloat
                    : (resultFloat == '' ? resultInt + CN_INTEGER : resultInt + CN_DOLLAR + resultFloat);

            }
            console.log(convertCurrency('1340000000000000000000007000000000800000808888888000.01'))
        </script>
    </body>

</html>